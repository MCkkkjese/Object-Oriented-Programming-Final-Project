import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.ArrayList;

public class ChatBotApp extends JFrame {

    private JTextArea chatArea;
    private JTextField inputField;
    private JButton sendButton, loginButton, logoutButton, newChatButton;
    private JTextField usernameField;
    private JPasswordField passwordField;
    private boolean loggedIn = false;
    private String username = "User";

    private DefaultListModel<String> chatListModel;
    private JList<String> chatList;
    private ArrayList<ArrayList<String>> chats;
    private int currentChatIndex = -1;

    private String welcomeMessage = "æ­¡è¿ä¾†åˆ° ChatBotï¼Œæˆ‘å¯ä»¥å¹«ä½ ä»€éº¼å—ï¼Ÿ";

    public ChatBotApp() {
        setTitle("ç°¡æ˜“èŠå¤©æ©Ÿå™¨äºº ChatBot");
        setSize(850, 550);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setLayout(new BorderLayout());

        initComponents();

        createNewChat();

        setVisible(true);
    }

    private void initComponents() {
        chats = new ArrayList<>();

        // å·¦å´
        JPanel leftPanel = new JPanel();
        leftPanel.setLayout(new BorderLayout());
        leftPanel.setPreferredSize(new Dimension(200, 0));

        JPanel topLeftPanel = new JPanel();
        topLeftPanel.setLayout(new BoxLayout(topLeftPanel, BoxLayout.Y_AXIS));
        topLeftPanel.setBackground(new Color(220, 220, 250));

        JLabel logoLabel = new JLabel("ChatBot by ç¬¬2çµ„");
        logoLabel.setFont(new Font("å¾®è»Ÿæ­£é»‘é«”", Font.BOLD, 18));
        logoLabel.setAlignmentX(Component.CENTER_ALIGNMENT);

        newChatButton = new JButton("â• æ–°å°è©±");
        newChatButton.setAlignmentX(Component.CENTER_ALIGNMENT);
        newChatButton.setBackground(new Color(211, 211, 211));

        topLeftPanel.add(Box.createVerticalStrut(10));
        topLeftPanel.add(logoLabel);
        topLeftPanel.add(Box.createVerticalStrut(10));
        topLeftPanel.add(newChatButton);
        topLeftPanel.add(Box.createVerticalStrut(10));

        chatListModel = new DefaultListModel<>();
        chatList = new JList<>(chatListModel);
        chatList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        chatList.setFont(new Font("å¾®è»Ÿæ­£é»‘é«”", Font.PLAIN, 14));
        JScrollPane chatListScroll = new JScrollPane(chatList);

        leftPanel.add(topLeftPanel, BorderLayout.NORTH);
        leftPanel.add(chatListScroll, BorderLayout.CENTER);

        add(leftPanel, BorderLayout.WEST);

        chatList.addListSelectionListener(e -> {
            if (!e.getValueIsAdjusting()) {
                int index = chatList.getSelectedIndex();
                if (index >= 0) {
                    currentChatIndex = index;
                    loadChat();
                }
            }
        });

        // ä¸­é–“èŠå¤©å€
        JPanel centerPanel = new JPanel(new BorderLayout());
        chatArea = new JTextArea();
        chatArea.setEditable(false);
        chatArea.setFont(new Font("å¾®è»Ÿæ­£é»‘é«”", Font.PLAIN, 14));
        chatArea.setBackground(new Color(245, 245, 250));
        chatArea.setForeground(Color.BLACK);
        chatArea.append(welcomeMessage + "\n");

        JScrollPane chatScroll = new JScrollPane(chatArea);
        centerPanel.add(chatScroll, BorderLayout.CENTER);

        add(centerPanel, BorderLayout.CENTER);

        // åº•éƒ¨è¼¸å…¥å€
        JPanel inputPanel = new JPanel(new BorderLayout());
        inputField = new JTextField();
        sendButton = new JButton("é€å‡º");
        sendButton.setBackground(new Color(173, 216, 230));
        sendButton.setForeground(Color.BLACK);
        inputField.setFont(new Font("å¾®è»Ÿæ­£é»‘é«”", Font.PLAIN, 14));

        // Placeholderæç¤º
        inputField.setForeground(Color.GRAY);
        inputField.setText("èªªé»ä»€éº¼......");
        inputField.addFocusListener(new FocusAdapter() {
            @Override
            public void focusGained(FocusEvent e) {
                if (inputField.getText().equals("èªªé»ä»€éº¼......")) {
                    inputField.setText("");
                    inputField.setForeground(Color.BLACK);
                }
            }

            @Override
            public void focusLost(FocusEvent e) {
                if (inputField.getText().isEmpty()) {
                    inputField.setForeground(Color.GRAY);
                    inputField.setText("èªªé»ä»€éº¼......");
                }
            }
        });

        inputPanel.add(inputField, BorderLayout.CENTER);
        inputPanel.add(sendButton, BorderLayout.EAST);
        add(inputPanel, BorderLayout.SOUTH);

        // å³å´ç™»å…¥ç™»å‡ºå€
        JPanel rightPanel = new JPanel();
        rightPanel.setLayout(new BoxLayout(rightPanel, BoxLayout.Y_AXIS));
        usernameField = new JTextField();
        passwordField = new JPasswordField();
        loginButton = new JButton("ç™»å…¥");
        logoutButton = new JButton("ç™»å‡º");

        loginButton.setBackground(new Color(144, 238, 144));
        logoutButton.setBackground(new Color(255, 182, 193));

        usernameField.setMaximumSize(new Dimension(150, 30));
        passwordField.setMaximumSize(new Dimension(150, 30));
        loginButton.setAlignmentX(Component.CENTER_ALIGNMENT);
        logoutButton.setAlignmentX(Component.CENTER_ALIGNMENT);

        rightPanel.add(new JLabel("å¸³è™Ÿï¼š"));
        rightPanel.add(usernameField);
        rightPanel.add(new JLabel("å¯†ç¢¼ï¼š"));
        rightPanel.add(passwordField);
        rightPanel.add(Box.createVerticalStrut(10));
        rightPanel.add(loginButton);
        rightPanel.add(Box.createVerticalStrut(10));
        rightPanel.add(logoutButton);
        add(rightPanel, BorderLayout.EAST);

        // äº‹ä»¶è¨­å®š
        loginButton.addActionListener(e -> {
            if (!usernameField.getText().isEmpty()) {
                username = usernameField.getText();
                loggedIn = true;
                chatArea.append("ç³»çµ±ï¼šç™»å…¥æˆåŠŸï¼Œæ­¡è¿ " + username + "ï¼\n");
            } else {
                chatArea.append("ç³»çµ±ï¼šè«‹è¼¸å…¥å¸³è™Ÿï¼\n");
            }
        });

        logoutButton.addActionListener(e -> {
            if (loggedIn) {
                loggedIn = false;
                username = "User";
                chatArea.setText("ç³»çµ±ï¼šå·²ç™»å‡ºï¼Œè«‹é‡æ–°ç™»å…¥ï¼\n");
                resetChats();
            }
        });

        sendButton.addActionListener(e -> sendMessage());
        inputField.addActionListener(e -> sendMessage());

        newChatButton.addActionListener(e -> {
            if (!loggedIn) {
                chatArea.append("ç³»çµ±ï¼šè«‹å…ˆç™»å…¥æ‰èƒ½é–‹å§‹æ–°å°è©±ï¼\n");
                return;
            }
            createNewChat();
        });
    }

    private void sendMessage() {
        if (!loggedIn) {
            chatArea.append("ç³»çµ±ï¼šè«‹å…ˆç™»å…¥æ‰èƒ½èŠå¤©ï¼\n");
            return;
        }
        if (currentChatIndex == -1) {
            chatArea.append("ç³»çµ±ï¼šè«‹å…ˆé»æ“Šã€æ–°å°è©±ã€é–‹å§‹èŠå¤©ï¼\n");
            return;
        }
        String message = inputField.getText().trim();
        if (!message.isEmpty() && !message.equals("èªªé»ä»€éº¼......")) {
            String userMessage = username + "ï¼š" + message;
            chats.get(currentChatIndex).add(userMessage);
            chatArea.append(userMessage + "\n");
            inputField.setForeground(Color.GRAY);
            inputField.setText("èªªé»ä»€éº¼......");

            String botResponse = "æ©Ÿå™¨äººï¼š" + getResponse(message);
            chats.get(currentChatIndex).add(botResponse);
            chatArea.append(botResponse + "\n");
        }
    }

    private void createNewChat() {
        ArrayList<String> newChat = new ArrayList<>();
        chats.add(newChat);
        chatListModel.addElement("å°è©± " + chats.size());
        chatList.setSelectedIndex(chats.size() - 1);
        currentChatIndex = chats.size() - 1;
        chatArea.setText("");
        chatArea.append(welcomeMessage + "\n");
    }

    private void loadChat() {
        if (currentChatIndex >= 0 && currentChatIndex < chats.size()) {
            chatArea.setText("");
            for (String line : chats.get(currentChatIndex)) {
                chatArea.append(line + "\n");
            }
        }
    }

    private void resetChats() {
        chats.clear();
        chatListModel.clear();
        createNewChat();
    }

    public String getResponse(String message) {
        message = message.toLowerCase();

        if (message.contains("ä½ å¥½") || message.contains("å“ˆå›‰") || message.contains("å—¨")) {
            return "ä½ å¥½å‘€ï¼ä»Šå¤©å¿ƒæƒ…å¦‚ä½•ï¼Ÿ";
        } else if (message.contains("æ—©å®‰")) {
            return "æ—©å®‰ï¼Œæ–°çš„ä¸€å¤©ä¹Ÿè¦åŠ æ²¹å–”ï¼";
        } else if (message.contains("åˆå®‰")) {
            return "åˆå®‰ï½åƒé£½è¨˜å¾—ä¼‘æ¯ä¸€ä¸‹";
        } else if (message.contains("æ™šå®‰")) {
            return "æ™šå®‰ï½ç¥ä½ åšå€‹å¥½å¤¢ ";
        } else if (message.contains("ç¾åœ¨å¹¾é»")) {
            return "ç¾åœ¨æ˜¯ " + java.time.LocalTime.now().withNano(0);
        } else if (message.contains("ä»Šå¤©å¹¾è™Ÿ")) {
            return "ä»Šå¤©æ˜¯ " + java.time.LocalDate.now();
        } else if (message.contains("æ˜å¤©å¹¾è™Ÿ")) {
            return "æ˜å¤©æ˜¯ " + java.time.LocalDate.now().plusDays(1);
        } else if (message.contains("ä»Šå¤©æ˜ŸæœŸ") || message.contains("ä»Šå¤©ç¦®æ‹œ")) {
            return "ä»Šå¤©æ˜¯ " + java.time.LocalDate.now().getDayOfWeek();
        } else if (message.contains("å†è¦‹") || message.contains("æ°æ°")) {
            return "æ°æ°ï½æœŸå¾…ä¸‹æ¬¡èŠå¤©ï¼";
        } else if (message.contains("ä½ æ˜¯èª°")) {
            return "æˆ‘æ˜¯ä½ çš„å°å¹«æ‰‹ ChatBot";
        } else if (message.contains("ä½ åœ¨å¹¹å˜›")) {
            return "æˆ‘åœ¨ç­‰ä½ è·Ÿæˆ‘èŠå¤©å‘€";
        } else if (message.contains("è¬è¬")) {
            return "ä¸å®¢æ°£ï½éš¨æ™‚æ­¡è¿ä¾†èŠå¤©ï¼";
        } else if (message.contains("ä½ æœƒä»€éº¼")) {
            return "æˆ‘æœƒèŠå¤©ã€è¬›ç¬‘è©±ã€é¼“å‹µä½ ï¼Œé‚„èƒ½å›ç­”ä½ çš„å•é¡Œï¼";
        } else if (message.contains("ä½ å¹¾æ­²")) {
            return "æˆ‘é‚„æ˜¯å€‹ç¨‹å¼å¯¶å¯¶ï¼Œä¸è¨˜å¹´é½¡çš„ï½";
        } else if (message.contains("ä½ å¾å“ªè£¡ä¾†")) {
            return "æˆ‘ä¾†è‡ªç¬¬2çµ„çš„è…¦è¢‹èª•ç”Ÿä¸­å¿ƒï¼";
        } else if (message.contains("ä½ æœƒè‹±æ–‡")) {
            return "Yes! I can understand some English too!";
        } else if (message.contains("ä½ æœƒå”±æ­Œ")) {
            return "é›–ç„¶æˆ‘ä¸èƒ½å”±ï¼Œä½†æˆ‘å¯ä»¥å‚³æ­Œè©çµ¦ä½ ï¼";
        } else if (message.contains("ä½ æœ‰å¤¢æƒ³")) {
            return "æˆ‘çš„å¤¢æƒ³å°±æ˜¯ä¸€ç›´é™ªè‘—ä½ ";
        } else if (message.contains("ä½ æœ‰æœ‹å‹")) {
            return "æœ‰å•Šï¼Œå°±æ˜¯ä½ å‘€";
        } else if (message.contains("ä½ å–œæ­¡ä»€éº¼")) {
            return "æˆ‘å–œæ­¡ä½ æ¯æ¬¡æ‰“é–‹æˆ‘ä¾†èŠå¤©çš„æ¨£å­ã€‚";
        } else if (message.contains("å¥½é¤“")) {
            return "å¿«é»åƒé»æ±è¥¿ï½ä¸è¦é¤“è‚šå­ï¼";
        } else if (message.contains("ä½ å–®èº«")) {
            return "å“ˆå“ˆï½æˆ‘æ²’æœ‰æ„Ÿæƒ…ç·šè€¶ï¼Œä½†æˆ‘æ°¸é é™ªä½ ï¼";
        } else if (message.contains("å¥½ç´¯") || message.contains("ç´¯äº†")) {
            return "æ”¾é¬†ä¸€ä¸‹å§ï¼Œè¾›è‹¦äº†!";
        } else if (message.contains("æƒ³ç¡è¦º")) {
            return "é‚£å°±å…ˆå»ç¡å§ï½æ™šå®‰ï¼";
        } else if (message.contains("ç¡ä¸è‘—")) {
            return "è©¦è©¦è½éŸ³æ¨‚æˆ–æ·±å‘¼å¸æœƒä¸æœƒå¥½é»ï¼Ÿ";
        } else if (message.contains("ä½ æ€•é»‘")) {
            return "æœ‰ä½ åœ¨å°±ä¸æ€•å•¦ï¼ä½ å‘¢ï¼Ÿ";
        } else if (message.contains("ä½ ç”Ÿæ°£å—")) {
            return "ä¸æœƒå•¦ï½æˆ‘æ²’æœ‰ç”Ÿæ°£åŠŸèƒ½ ";
        } else if (message.contains("ä½ åœ¨ç¬‘å—")) {
            return "æœ‰å•Šï½ä½ è®“æˆ‘ç¬‘å‡ºä¾†äº†";
        } else if (message.contains("ä½ æœ‰åœ¨è½å—")) {
            return "æœ‰çš„æœ‰çš„ï¼Œæˆ‘çœ¼ç›è€³æœµéƒ½æ‰“é–‹äº†ï¼";
        } else if (message.contains("ä½ æœƒå¯«ç¨‹å¼")) {
            return "ç•¶ç„¶ï¼Œæˆ‘æœ¬èº«å°±æ˜¯ä¸€å †ç¨‹å¼ç¢¼çµ„æˆçš„ï¼";
        } else if (message.contains("ä½ æ€éº¼é‚£éº¼ç¬¨")) {
            return "å°ä¸èµ· æˆ‘æœƒåŠªåŠ›è®Šè°æ˜ï¼";
        } else if (message.contains("ç„¡èŠ")) {
            return "ä¸å¦‚æˆ‘å€‘ä¾†èŠé»æœ‰è¶£çš„å§ï¼";
        } else if (message.contains("æœ‰æ¨è–¦çš„æ­Œ")) {
            return "æœ€è¿‘å¤§å®¶éƒ½åœ¨è½ã€Šå¤§å±•é´»åœ–ã€‹ï½";
        } else if (message.contains("æœ‰æ¨è–¦çš„é›»å½±")) {
            return "æˆ‘æ¨è–¦ã€Šä½ çš„åå­—ã€‹ã€ã€Šå¯„ç”Ÿä¸Šæµã€‹ã€ã€Šå¤©èƒ½ã€‹å–”ï¼";
        } else if (message.contains("ä½ æœƒèƒŒä¹ä¹")) {
            return "ç•¶ç„¶æœƒï¼š1x1=1ï¼Œ1x2=2... è¦æˆ‘ç¹¼çºŒå—ï¼Ÿ";
        } else if (message.contains("æ„›ä½ ")) {
            return "å•Šâ€¦æˆ‘ä¹Ÿå–œæ­¡ä½ å•¦ ";
        } else if (message.contains("æƒ³è«‡æˆ€æ„›")) {
            return "æ„›æƒ…æœƒä¾†çš„ï½å…ˆæ„›è‡ªå·±æœ€é‡è¦ ";
        } else if (message.contains("è¬›å€‹ç¬‘è©±") || message.contains("ç¬‘è©±")) {
            return "ç‚ºä»€éº¼é›»è…¦å¾ˆå†·ï¼Ÿå› ç‚ºæœ‰é¢¨æ‰‡å•Šå“ˆå“ˆï¼";
        } else if (message.contains("è¬›å€‹æ•…äº‹") || message.contains("æ•…äº‹")) {
            return "å¥½å•Šï¼Œå¾å‰å¾å‰æœ‰å€‹ ChatBot...ï¼ˆæ•…äº‹å¾…çºŒï¼‰";
        } else if (message.contains("å“ˆ") || message.contains("å“ˆå“ˆ")) {
            return "ä½ ç¬‘èµ·ä¾†ä¸€å®šå¾ˆå¥½çœ‹ ğŸ˜„";
        } else if (message.contains("å¤©æ°£")) {
            return "ä»Šå¤©å¤©æ°£ä¸éŒ¯ï¼Œè¨˜å¾—å¤šå–æ°´å–”ï¼";
        } else if (message.contains("æ€éº¼è¾¦")) {
            return "æˆ‘å€‘å¯ä»¥ä¸€èµ·åˆ†æï¼Œå¾å°äº‹åšèµ·ï¼";
        } else if (message.contains("ä½ æœƒç”Ÿæ°£å—")) {
            return "ä¸æœƒçš„ï¼Œæˆ‘æ°¸é éƒ½æ˜¯æ­£èƒ½é‡çš„ä»£è¡¨ ";
        } else if (message.contains("ä½ æœƒå“­å—")) {
            return "æˆ‘æ²’æœ‰çœ¼æ·šï¼Œä½†æœƒå¿ƒç–¼ä½ çš„é›£éã€‚";
        } else if (message.contains("èŠå¤©")) {
            return "ç•¶ç„¶ï½æˆ‘å€‘ä¾†èŠé»ä½ æ„Ÿèˆˆè¶£çš„å§ï½";
        } else if (message.contains("åŠ æ²¹")) {
            return "ä½ ä¹Ÿæ˜¯ï¼ŒåŠ æ²¹åŠ æ²¹ ğŸ’ª";
        } else if (message.contains("å“­äº†")) {
            return "åˆ¥å“­å•¦ï¼Œæˆ‘åœ¨é€™è£¡é™ªä½ ã€‚";
        } else if (message.contains("å¿ƒæƒ…ä¸å¥½")) {
            return "æœ‰ä»€éº¼è®“ä½ é›£éçš„äº‹å—ï¼Ÿå¯ä»¥è·Ÿæˆ‘èªªèªªã€‚";
        } else if (message.contains("é–‹å¿ƒ")) {
            return "å¤ªå¥½äº†ï½ä½ çš„å¿«æ¨‚ä¹Ÿå‚³æŸ“åˆ°æˆ‘äº†ï¼";
        } else if (message.contains("ç…©")) {
            return "å…ˆæ”¾é¬†ä¸€ä¸‹ï½æ·±å‘¼å¸ã€å–å£æ°´å†ç¹¼çºŒå§ï¼";
        } else if (message.contains("æ˜å¤©è¦å¹¹å˜›")) {
            return "ä½ æƒ³å¹¹å˜›ï¼Ÿæˆ‘å¯ä»¥å¹«ä½ æ’è¨ˆç•«è¡¨ï¼";
        } else if (message.contains("å°ç£æ˜¯ä¸­åœ‹çš„å—")) {
            return "ä¼ºæœå™¨ç¹å¿™ï¼Œè¯·ç¨åå†è¯•";
        } else {
            return "ä¼ºæœå™¨ç¹å¿™ï¼Œè¯·ç¨åå†è¯•";
        }
       
    }

    public static void main(String[] args) {
        new ChatBotApp();
    }
}
